# L2.5

## Задача

Что выведет программа?

Объяснить вывод программы.

```
package main

type customError struct {
    msg string
}

func (e *customError) Error() string {
    return e.msg
}

func test() *customError {
    // ... do something
    return nil
}

func main() {
    var err error
    err = test()
    if err != nil {
        println("error")
        return
    }
    println("ok")
}
```

## Решение

Значение интерфейса складывается из двух полей: 1) указателя на таблицу с информацией о типе данных, реализующем интерфейс, и 2) указателя на данные. Если значение одного из полей не равно nil, значение интерфейса не равно nil.

В программе реализована структура customError, имеющая поле msg и метод Error(), возвращающий строку с ошибкой. Таким образом, данный тип удовлетворяет интерфейсу error.

Функция test() возвращает указатель на тип данных customError. Результат вызова функции сохраняется в переменную err.

Если посмотреть значение переменной err, получим nil, так как переменная не хранит никаких данных. Но в переменной err, помимо данных, хранится и информация о значении типа, реализующем интерфейс error, и это значение не равно nil (известен тип customError).

Таким образом, при сравнении переменной err с nil получаем false, так как, хоть значение данных интерфейса и равно nil, значение типа интерфейса не равно nil.

## Пример запуска программы

```
$ go run 5/main.go
error
```