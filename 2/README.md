# L2.2

## Задача

Что выведет программа?

Объяснить порядок выполнения defer функций и итоговый вывод.
```
package main

import "fmt"

func test() (x int) {
    defer func() {
        x++
    }()
    x = 1
    return
}

func anotherTest() int {
    var x int
    defer func() {
        x++
    }()
    x = 1
    return x
}

func main() {
    fmt.Println(test())
    fmt.Println(anotherTest())
}
```

## Решение

Оператор defer всегда выполняется перед выходом из функции.

Первая функция test() изначально имеет именованный возвращаемый параметр (x int), указанный при определении функции, поэтому оператор defer сможет изменить его значение, т.к. возвращаемая переменная уже доступна.

Во второй функции anotherTest() возвращаемый результат не именован (просто int), поэтому return сначала сформирует результат, а затем выполнится defer. Так как возвращаемое значение формируется перед defer, то изменения внутри defer не влияют на возвращаемое значение.

Таким образом, defer внутри test() изменит возвращаемый результат, а defer внутри anotherTest() - нет.

## Пример запуска программы

```
$ go run 2/main.go
2
1
```